"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=require("path"),n=process.cwd(),i=require(r.join(n,"settings")),t=require("underscore"),a=require("emag.biz"),u=require("emag.cfg"),o=require("log4js").getLogger("handle.pushCake");!function(){function r(e,r,n){}function n(r,n,i){if("object"===(void 0===i?"undefined":e(i)))return o.error("pushCake nasha:",i);o.debug("pushCake nasha:",i)}exports.nasha=function(e,i){try{var t=JSON.parse(i)}catch(e){return}a.pushCake.nasha(t).then(r.bind(null,e,t)).catch(n.bind(null,e,t))}}(),function(){function r(e,r,n){if(n){var i=[null,JSON.stringify([5002,n[1],t.now(),r.seqId])],a=!0,u=!1,c=void 0;try{for(var d,s=t.values(n[0])[Symbol.iterator]();!(a=(d=s.next()).done);a=!0){var l=d.value;l.server_id&&l.channel_id&&(i.splice(0,1,l.channel_id),e("/queue/back.send.v3."+l.server_id,{priority:9},i,function(e){if(e)return o.error("pushCake ready:",e)}))}}catch(e){u=!0,c=e}finally{try{!a&&s.return&&s.return()}finally{if(u)throw c}}}}function n(r,n,i){if("object"===(void 0===i?"undefined":e(i)))return o.error("pushCake ready:",i);if("invalid_user_id"===i)return o.debug("pushCake ready:",i);var a=[n.channelId,JSON.stringify([5002,,t.now(),n.seqId,i])];r("/queue/back.send.v3."+n.serverId,{priority:9},a,function(e){if(e)return o.error("pushCake ready:",e)})}function i(e,r,n){if(n){var i=[null,JSON.stringify([5002,n[1],t.now(),r.seqId])],a=!0,u=!1,c=void 0;try{for(var d,s=t.values(n[0])[Symbol.iterator]();!(a=(d=s.next()).done);a=!0){var l=d.value;l.server_id&&l.channel_id&&(i.splice(0,1,l.channel_id),e("/queue/back.send.v3."+l.server_id,{priority:9},i,function(e){if(e)return o.error("pushCake ready:",e)}))}}catch(e){u=!0,c=e}finally{try{!a&&s.return&&s.return()}finally{if(u)throw c}}}}exports.ready=function(e,t){try{var u=JSON.parse(t)}catch(e){return}a.pushCake.ready(u.serverId,u.channelId,i.bind(null,e,u)).then(r.bind(null,e,u)).catch(n.bind(null,e,u))}}(),function(){function r(e,r,n){if(n){var i=[null,JSON.stringify([5002,n[1],t.now(),r.seqId])],a=!0,u=!1,c=void 0;try{for(var d,s=t.values(n[0])[Symbol.iterator]();!(a=(d=s.next()).done);a=!0){var l=d.value;l.server_id&&l.channel_id&&(i.splice(0,1,l.channel_id),e("/queue/back.send.v3."+l.server_id,{priority:9},i,function(e){if(e)return o.error("pushCake craps4:",e)}))}}catch(e){u=!0,c=e}finally{try{!a&&s.return&&s.return()}finally{if(u)throw c}}}}function n(r,n,i){if("object"===(void 0===i?"undefined":e(i)))return o.error("pushCake craps4:",i);if("invalid_user_id"===i)return o.debug("pushCake craps4:",i);var a=[n.channelId,JSON.stringify([5002,,t.now(),n.seqId,i])];r("/queue/back.send.v3."+n.serverId,{priority:9},a,function(e){if(e)return o.error("pushCake craps4:",e)})}exports.craps4=function(e,i){try{var t=JSON.parse(i)}catch(e){return}a.pushCake.craps4(t.serverId,t.channelId).then(r.bind(null,e,t)).catch(n.bind(null,e,t))}}(),function(){function r(e,r,n){if(n){var i=[null,JSON.stringify([5002,n[1],t.now(),r.seqId])],a=!0,u=!1,c=void 0;try{for(var d,s=t.values(n[0])[Symbol.iterator]();!(a=(d=s.next()).done);a=!0){var l=d.value;l.server_id&&l.channel_id&&(i.splice(0,1,l.channel_id),e("/queue/back.send.v3."+l.server_id,{priority:9},i,function(e){if(e)return o.error("pushCake bankerBet:",e)}))}}catch(e){u=!0,c=e}finally{try{!a&&s.return&&s.return()}finally{if(u)throw c}}}}function n(r,n,i){if("object"===(void 0===i?"undefined":e(i)))return o.error("pushCake bankerBet:",i);if("invalid_user_id"===i)return o.debug("pushCake bankerBet:",i);var a=[n.channelId,JSON.stringify([5002,,t.now(),n.seqId,i])];r("/queue/back.send.v3."+n.serverId,{priority:9},a,function(e){if(e)return o.error("pushCake bankerBet:",e)})}exports.bankerBet=function(e,i){try{var t=JSON.parse(i)}catch(e){return}a.pushCake.bankerBet(t.serverId,t.channelId,t.data).then(r.bind(null,e,t)).catch(n.bind(null,e,t))}}(),function(){function r(e,r,n){if(n){var i=[null,JSON.stringify([5002,n[1],t.now(),r.seqId])],a=!0,u=!1,c=void 0;try{for(var d,s=t.values(n[0])[Symbol.iterator]();!(a=(d=s.next()).done);a=!0){var l=d.value;l.server_id&&l.channel_id&&(i.splice(0,1,l.channel_id),e("/queue/back.send.v3."+l.server_id,{priority:9},i,function(e){if(e)return o.error("pushCake bankerDice:",e)}))}}catch(e){u=!0,c=e}finally{try{!a&&s.return&&s.return()}finally{if(u)throw c}}}}function n(r,n,i){if("object"===(void 0===i?"undefined":e(i)))return o.error("pushCake bankerDice:",i);if("invalid_user_id"===i)return o.debug("pushCake bankerDice:",i);var a=[n.channelId,JSON.stringify([5002,,t.now(),n.seqId,i])];r("/queue/back.send.v3."+n.serverId,{priority:9},a,function(e){if(e)return o.error("pushCake bankerDice:",e)})}exports.bankerDice=function(e,i){try{var t=JSON.parse(i)}catch(e){return}a.pushCake.bankerDice(t.serverId,t.channelId).then(r.bind(null,e,t)).catch(n.bind(null,e,t))}}(),function(){function r(e,r,n){if(n){var i=[null,JSON.stringify([5002,n[1],t.now(),r.seqId])],a=!0,u=!1,c=void 0;try{for(var d,s=t.values(n[0])[Symbol.iterator]();!(a=(d=s.next()).done);a=!0){var l=d.value;l.server_id&&l.channel_id&&(i.splice(0,1,l.channel_id),e("/queue/back.send.v3."+l.server_id,{priority:9},i,function(e){if(e)return o.error("pushCake unBankerBet:",e)}))}}catch(e){u=!0,c=e}finally{try{!a&&s.return&&s.return()}finally{if(u)throw c}}}}function n(r,n,i){if("object"===(void 0===i?"undefined":e(i)))return o.error("pushCake unBankerBet:",i);if("invalid_user_id"===i)return o.debug("pushCake unBankerBet:",i);var a=[n.channelId,JSON.stringify([5002,,t.now(),n.seqId,i])];r("/queue/back.send.v3."+n.serverId,{priority:9},a,function(e){if(e)return o.error("pushCake unBankerBet:",e)})}exports.unBankerBet=function(e,i){try{var t=JSON.parse(i)}catch(e){return}try{var u=JSON.parse(t.data)}catch(e){return}a.pushCake.unBankerBet(t.serverId,t.channelId,u).then(r.bind(null,e,t)).catch(n.bind(null,e,t))}}(),function(){function r(e,r,n){if(n){var i=[null,JSON.stringify([5002,n[1],t.now(),r.seqId])],a=!0,u=!1,c=void 0;try{for(var d,s=t.values(n[0])[Symbol.iterator]();!(a=(d=s.next()).done);a=!0){var l=d.value;l.server_id&&l.channel_id&&(i.splice(0,1,l.channel_id),e("/queue/back.send.v3."+l.server_id,{priority:9},i,function(e){if(e)return o.error("pushCake bankerContinue:",e)}))}}catch(e){u=!0,c=e}finally{try{!a&&s.return&&s.return()}finally{if(u)throw c}}}}function n(r,n,i){if("object"===(void 0===i?"undefined":e(i)))return o.error("pushCake bankerContinue:",i);if("invalid_user_id"===i)return o.debug("pushCake bankerContinue:",i);var a=[n.channelId,JSON.stringify([5002,,t.now(),n.seqId,i])];r("/queue/back.send.v3."+n.serverId,{priority:9},a,function(e){if(e)return o.error("pushCake bankerContinue:",e)})}exports.bankerContinue=function(e,i){try{var t=JSON.parse(i)}catch(e){return}console.log(t),a.pushCake.bankerContinue(t.serverId,t.channelId,t.data).then(r.bind(null,e,t)).catch(n.bind(null,e,t))}}(),function(){function r(e,r,n){if(n){var i=[null,JSON.stringify([5002,n[1],t.now(),r.seqId])],a=!0,u=!1,c=void 0;try{for(var d,s=t.values(n[0])[Symbol.iterator]();!(a=(d=s.next()).done);a=!0){var l=d.value;l.server_id&&l.channel_id&&(i.splice(0,1,l.channel_id),e("/queue/back.send.v3."+l.server_id,{priority:9},i,function(e){if(e)return o.error("pushCake bankerContinueBet:",e)}))}}catch(e){u=!0,c=e}finally{try{!a&&s.return&&s.return()}finally{if(u)throw c}}}}function n(r,n,i){if("object"===(void 0===i?"undefined":e(i)))return o.error("pushCake bankerContinueBet:",i);if("invalid_user_id"===i)return o.debug("pushCake bankerContinueBet:",i);var a=[n.channelId,JSON.stringify([5002,,t.now(),n.seqId,i])];r("/queue/back.send.v3."+n.serverId,{priority:9},a,function(e){if(e)return o.error("pushCake bankerContinueBet:",e)})}exports.bankerContinueBet=function(e,i){try{var t=JSON.parse(i)}catch(e){return}console.log(i),a.pushCake.bankerContinueBet(t.serverId,t.channelId,t.data).then(r.bind(null,e,t)).catch(n.bind(null,e,t))}}();
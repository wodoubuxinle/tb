"use strict";var e=require("path"),r=process.cwd(),i=require(e.join(r,"settings")),u=require("node-uuid"),t=require("speedt-utils").md5,n=require("speedt-utils").utils,s=require("emag.db").mysql,d=require("emag.db").redis,o=require("emag.cfg"),p=require("emag.biz"),c=require("underscore");c.str=require("underscore.string"),c.mixin(c.str.exports()),function(){exports=module.exports=function(e,r){return e.group_entry_time=(new Date).getTime(),e.backend_id=i.app.id,new Promise(function(i,u){(r||s).query("UPDATE s_user SET backend_id=?, group_id=?, group_entry_time=? WHERE id=?",[e.backend_id,e.group_id,e.group_entry_time,e.id],function(r){if(r)return u(r);i(e)})})}}();
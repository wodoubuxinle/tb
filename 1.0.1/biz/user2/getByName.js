"use strict";var e=require("path"),r=process.cwd(),u=require(e.join(r,"settings")),i=require("node-uuid"),s=require("speedt-utils").md5,t=require("speedt-utils").utils,n=require("emag.db").mysql,o=require("emag.db").redis,q=require("emag.cfg"),c=require("emag.biz"),d=require("underscore");d.str=require("underscore.string"),d.mixin(d.str.exports()),function(){exports=module.exports=function(e,r){return new Promise(function(u,i){(r||n).query("SELECT a.* FROM s_user a WHERE a.user_name=?",[e],function(e,r){if(e)return i(e);u(n.checkOnly(r)?r[0]:null)})})}}();
"use strict";var e=require("path"),r=process.cwd(),i=require(e.join(r,"settings")),u=require("node-uuid"),t=require("speedt-utils").md5,n=require("speedt-utils").utils,s=require("emag.db").mysql,o=require("emag.db").redis,a=require("emag.cfg"),d=require("emag.biz"),c=require("underscore");c.str=require("underscore.string"),c.mixin(c.str.exports()),function(){function e(e,t){return new Promise(function(s,a){o.evalsha(r,u,i.redis.database,e,t,function(e,r){return e?a(e):c.isArray(r)?void s(n.arrToObj(r)):a(r)})})}exports=module.exports=function(r,i){return new Promise(function(u,t){e(r,i).then(d.group.quit.bind(null,r,i)).then(function(e){return u(e)}).catch(t)})};var r="6f3e8fc00771defac1a08fd0d7f2aa97e9734f37",u=3}();
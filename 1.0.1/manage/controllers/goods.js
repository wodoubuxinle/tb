"use strict";var e=require("emag.biz"),s=require("underscore"),o=require("../settings"),n=require("speedt-utils").utils;exports.indexUI=function(s,n,d){e.goods.findAll(function(e,i){if(e)return d(e);n.render("goods/index",{conf:o,data:{list_goods:i,session_user:s.session.user,nav_choose:",04,0402,"}})})},exports.addUI=function(e,s,n){s.render("goods/add",{conf:o,data:{session_user:e.session.user,nav_choose:",04,0402,"}})},exports.add=function(s,o,n){var d=s.body;d.user_id=s.session.userId,e.goods.saveNew(d,function(e,s){if(e)return n(e);o.send({})})},exports.editUI=function(s,n,d){var i=s.query.id;Promise.all([e.goods.getById(i),e.goods.findDetailById(i)]).then(function(e){n.render("goods/edit",{conf:o,data:{goods:e[0],list_goods_detail:e[1],session_user:s.session.user,nav_choose:",04,0402,"}})}).catch(d)},exports.edit=function(s,o,n){var d=s.body;e.goods.editInfo(d,function(e,s){if(e)return n(e);o.send({})})},exports.del=function(s,o,n){var d=s.body;e.goods.del(d.id,function(e,s){if(e)return n(e);o.send({})})};
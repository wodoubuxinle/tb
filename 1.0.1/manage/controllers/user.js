"use strict";var e=require("emag.biz"),n=require("../settings"),r=require("speedt-utils").utils;exports.resetPwd=function(n,r,s){var t=n.body;e.user.resetPwd(t.id,"123456",function(e){if(e)return s(e);r.send({})})},exports.del=function(n,r,s){var t=n.body;e.user.del(t.id,function(e){if(e)return s(e);r.send({})})},exports.indexUI=function(r,s,t){e.user.findAll(1,function(e,i){if(e)return t(e);s.render("user/index",{conf:n,data:{list_user:i,session_user:r.session.user,nav_choose:",03,0301,"}})})},exports.editUI=function(r,s,t){var i=r.query.id;e.user.getById(i).then(function(e){if(!e)return t(new Error("Not Found"));s.render("user/edit",{conf:n,data:{user:e,session_user:r.session.user,nav_choose:",03,0301,"}})}).catch(t)},exports.edit=function(n,r,s){var t=n.body;e.user.editInfo(t).then(function(){return r.send({})}).catch(s)},exports.giftUI=function(r,s,t){var i=r.query.id;e.gift.findAll(i,function(e,i){if(e)return t(e);s.render("user/gift",{conf:n,data:{list_gift:i,session_user:r.session.user,nav_choose:",03,0301,"}})})},exports.paymentUI=function(r,s,t){var i=r.query.id;e.user_payment.findAllByUserId(i,function(e,i){if(e)return t(e);s.render("user/payment",{conf:n,data:{list_payment:i,session_user:r.session.user,nav_choose:",03,0301,"}})})};
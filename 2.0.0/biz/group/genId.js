"use strict";var e=require("path"),r=process.cwd(),i=require(e.join(r,"settings")),u=require("node-uuid"),n=require("speedt-utils").md5,t=require("speedt-utils").utils,s=require("emag.db").mysql,o=require("emag.db").redis,d=require("emag.cfg"),c=require("emag.biz"),q=require("underscore");q.str=require("underscore.string"),q.mixin(q.str.exports()),function(){function e(r,i){var u=q.random(1e5,999999);c.user.findAllByGroupId(u,i).then(function(n){if(0<n.length)return e(r,i);r(null,u)}).catch(r)}exports=module.exports=function(r){return new Promise(function(i,u){e(function(e,r){if(e)return u(e);i(r)},r)})}}();
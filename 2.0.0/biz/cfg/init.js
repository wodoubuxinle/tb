"use strict";var e=require("path"),r=process.cwd(),i=require(e.join(r,"settings")),t=require("node-uuid"),u=require("speedt-utils").md5,n=require("speedt-utils").utils,s=require("emag.db").mysql,l=require("emag.db").redis,a=require("emag.cfg"),o=require("emag.biz"),d=require("underscore");d.str=require("underscore.string"),d.mixin(d.str.exports()),exports=module.exports=function(e){o.cfg.findAll(null,function(r,t){if(r)return e(r);l.select(i.redis.database,function(r){if(r)return e(r);var i=!0,u=!1,n=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var o=s.value;l.hset("cfg::"+o.type_,o.key_,o.value_,l.print)}}catch(r){u=!0,n=r}finally{try{!i&&a.return&&a.return()}finally{if(u)throw n}}e(null,t)})})};